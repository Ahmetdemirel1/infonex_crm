{% extends 'registration/base.html' %}
{% load staticfiles %}

{% block title %}New Delegate | {% endblock %}

{% block script_includes %}
<link href="{% static 'delegate/delegate.css' %}"
  rel="stylesheet" type="text/css">
<script type="text/javascript"
  src="{% static 'delegate/javascript/delegate.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container-fluid fill">
  {% if registrant %}
  <input type="hidden" id="current-registrant-id" value="{{ registrant.id }}" />
  {% else %}
  <input type="hidden" id="current-registrant-id" value="" />
  {% endif %}
  <div class="row fill">
    <div class="col-sm-9 left-main-panel">
      <div id="conference-selection">
        <input type="hidden" id="selected-conference-id" value="{{ conference.id }}" />
        <h3>New Registration For:
          <span class="h1" id="displayed-conf-name">
            {{ conference }}
          </span>
          <a href="#conference-details"
            class="btn btn-warning btn-sm crm-list-action" data-toggle="collapse">
              Change Event
          </a>
        </h3>
        <div class="row collapse" id="conference-details">
          <div class="col-sm-12">
            {{ conference_select_form.event.errors }}
          </div>
          <div class="col-sm-12">
            {{ conference_select_form.event.label_tag }}
          </div>
          <div class="col-sm-10">
            {{ conference_select_form.event }}
          </div>
          <div class="col-sm-2">
            <button type="button" class="btn btn-primary btn-sm"
              id="change-conference">
              Change
            </button>
          </div>
        </div>
      </div>

      <div id="conference-options">
        {% if conference_options %}
        <h1>Conference Option Selection</h1>
        <div class="panel panel-info">
          <div class="panel-heading">
            <h2 class="panel-title h2">
              Please select which options the delegate is registering for
            </h2>
          </div>
          <table class="table">
            <thead class="thead-inverse">
              <tr>
                <th class="col-sm-2">Select?</th>
                <th class="col-sm-6">Option Description</th>
                <th class="col-sm-2">Start Date</th>
                <th class="col-sm-2">End Date</th>
              </tr>
            </thead>
            <tbody>
              {% for option in conference_options %}
              <tr>
                {% if option.primary %}
                <td>
                  <input type="checkbox" name="event-option-selection"
                    value="{{ option.id }}" checked="checked" />
                </td>
                {% else %}
                <td>
                  <input type="checkbox" name="event-option-selection"
                    value="{{ option.id }}" />
                </td>
                {% endif %}
                <td>{{ option.name }}</td>
                <td>{{ option.startdate }}</td>
                <td>{{ option.enddate }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endif %}
      </div>

      <div id='delegate-info'>
        <h3>Delegate Information</h3>
        {{ new_delegate_form }}
      </div>
      <div id='company-info'>
        <h3>Company Information</h3>
        {{ company_select_form }}
      </div>
      <div id='reg-details'>
        <h3>Reg details</h3>
        {{ reg_details_form }}
      </div>
      <div id='assistant-info'>
        <h3>Assistant Information</h3>
        {{ assistant_form }}
      </div>
    </div>
    <div id="crm-sidebar" class="col-sm-3 col-md-3 crm-sidebar fill">
      {% include 'delegate/addins/crm_sidebar.html' %}
    </div>
  </div>
</div>
{% endblock %}
